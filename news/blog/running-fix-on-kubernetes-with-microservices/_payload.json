[{"data":1,"prerenderedAt":846},["ShallowReactive",2],{"fvSMh7g9sy":3},{"pageSetup":4,"sections":15},{"image":5,"title":9,"slug":10,"description":13,"keywords":14},{"url":6,"width":7,"height":8},"https://cdn.sanity.io/images/40fnhjbe/production/dd6adbc00415d6ac3ef299d8187b9f062f5a9b6a-3840x2160.png",3840,2160,"Running FIX on Kubernetes with Microservices",{"current":11,"_type":12},"running-fix-on-kubernetes-with-microservices","slug","Clear Street is a cloud-native financial technology firm on a mission to modernize the brokerage ecosystem.",null,{"header":16,"content":39,"footer":757},{"category":17,"title":9,"date":20,"summary":13,"author":21,"hello":38},{"name":18,"colorSlug":19},"Engineering","engineering","2021-03-09",{"_createdAt":22,"name":23,"_id":24,"_updatedAt":25,"slug":26,"role":28,"_type":29,"_rev":30,"photo":31},"2024-02-16T14:38:42Z","Clear Street Engineering","FY3Umrpkptjq2bXyZZikKw","2024-05-30T15:04:12Z",{"current":27,"_type":12},"clear-street-engineering","","authors","oquihqXh9OzAvkinFGpwlk",{"extension":32,"alt":14,"hotspot":14,"asset":33,"url":36,"width":37,"height":37},"png",{"_type":34,"_ref":35},"reference","image-f9f54b5f5240dfdb9749b6abea1e0ea4720c0dee-480x480-png","https://cdn.sanity.io/images/40fnhjbe/production/f9f54b5f5240dfdb9749b6abea1e0ea4720c0dee-480x480.png",480,"world",{"type":40,"readingTime":41,"body":42,"references":662,"pressReleasesFootNote":663,"legalText":689,"form":728},"blog",11,[43,55,76,83,113,121,140,148,156,164,172,179,202,214,226,234,246,269,281,288,305,312,320,328,335,343,350,358,365,373,380,399,406,414,421,429,435,443,450,458,465,480,488,496,503,511,518,526,533,541,548,563,570,578,586,593,601,609,617,625,633,654],{"_key":44,"markDefs":45,"children":46,"_type":53,"style":54},"3a69c61a1cc9",[],[47],{"_type":48,"marks":49,"text":51,"_key":52},"span",[50],"strong","Background","3a69c61a1cc90","block","h5",{"markDefs":56,"children":61,"_type":53,"style":74,"_key":75},[57],{"_type":58,"to":59,"_key":60},"link","https://www.fixtrading.org/what-is-fix/","19527805728a",[62,66,70],{"_type":48,"marks":63,"text":64,"_key":65},[],"At Clear Street, trading is what we do. Making it easy for customers to submit trades to us is of paramount importance. The","e96b652d32890",{"_type":48,"marks":67,"text":68,"_key":69},[60]," FIX protocol","e96b652d32891",{"_type":48,"marks":71,"text":72,"_key":73},[]," is ubiquitous across the financial services industry as a means to facilitate exchange of financial data. FIX engines allow clients and servers to stream trades and responses back and forth continuously with many built-in features, such as heartbeats and status messages. Although we already accept trades via file drops and our API, customers expect to have the ability to use the same FIX engine they already have in place.","e96b652d32892","normal","e96b652d3289",{"_key":77,"markDefs":78,"children":79,"_type":53,"style":74},"2ebfb83de930",[],[80],{"marks":81,"text":28,"_key":82,"_type":48},[],"2ebfb83de9300",{"_key":84,"markDefs":85,"children":92,"_type":53,"style":74},"eae9c2630561",[86,89],{"_type":58,"to":87,"_key":88},"https://github.com/clear-street/docs/blob/master/api_0.0.4.yaml","19f312aca0df",{"to":90,"_key":91,"_type":58},"https://clear-street.github.io/FIX-docs/#introduction","9c3a347c4fda",[93,97,101,105,109],{"_type":48,"marks":94,"text":95,"_key":96},[],"As part of integrating with FIX, we adapted our existing","eae9c26305610",{"_type":48,"marks":98,"text":99,"_key":100},[88]," API spec","eae9c26305611",{"_type":48,"marks":102,"text":103,"_key":104},[]," to fit the FIX protocol and created a","eae9c26305612",{"_type":48,"marks":106,"text":107,"_key":108},[91]," new spec","eae9c26305613",{"_type":48,"marks":110,"text":111,"_key":112},[],".","eae9c26305614",{"_type":53,"style":54,"_key":114,"markDefs":115,"children":116},"1677c60cc5a2",[],[117],{"_type":48,"marks":118,"text":119,"_key":120},[50],"Problem: Outdated Assumptions","1677c60cc5a20",{"_type":53,"style":74,"_key":122,"markDefs":123,"children":127},"189d78d15e3b",[124],{"_type":58,"to":125,"_key":126},"https://github.com/quickfixgo/quickfix","0739b843108e",[128,132,136],{"marks":129,"text":130,"_key":131,"_type":48},[],"FIX engines are well understood and have been implemented a number of times by various companies in the industry. In fact, we were able to leverage an","189d78d15e3b0",{"marks":133,"text":134,"_key":135,"_type":48},[126]," existing open source Go library","189d78d15e3b1",{"_type":48,"marks":137,"text":138,"_key":139},[]," to handle the implementation of the FIX protocol. However, the FIX protocol was released in 1992; it makes assumptions about the way users will run it based on the technology that was available at the time. As such, it is much more easily implemented within a monolith running on a single real machine, rather than the distributed system deployed on Kubernetes that we have at Clear Street.","189d78d15e3b2",{"children":141,"_type":53,"style":54,"_key":146,"markDefs":147},[142],{"text":143,"_key":144,"_type":48,"marks":145},"Traditional Setup","0aca02bb00d30",[50],"0aca02bb00d3",[],{"markDefs":149,"children":150,"_type":53,"style":74,"_key":155},[],[151],{"_type":48,"marks":152,"text":153,"_key":154},[],"The traditional FIX setup is relatively simple. A client will connect via a fixed IP and port to a single application that runs on a real machine. The FIX engine maintains a live socket connection over which the client and server stream requests and responses respectively. Multiple clients can connect to a single instance and the traffic is differentiated based on a tuple of (SenderID, SessionQualifier) that is sent along with the trade details.","cf82b28893570","cf82b2889357",{"children":157,"_type":53,"style":54,"_key":162,"markDefs":163},[158],{"_type":48,"marks":159,"text":160,"_key":161},[50],"Overview","39556d20d54a0","39556d20d54a",[],{"style":74,"_key":165,"markDefs":166,"children":167,"_type":53},"099badd183d4",[],[168],{"marks":169,"text":170,"_key":171,"_type":48},[],"There were a few major considerations that factored into our design:","099badd183d40",{"markDefs":173,"children":174,"_type":53,"style":74,"_key":178},[],[175],{"_type":48,"marks":176,"text":28,"_key":177},[],"473fe65e5e040","473fe65e5e04",{"_key":180,"markDefs":181,"children":185,"style":74,"_type":53},"c736ea280d4a",[182],{"_type":58,"to":183,"_key":184},"https://www.investopedia.com/terms/o/oms.asp","7a47d62fecea",[186,190,194,198],{"_type":48,"marks":187,"text":188,"_key":189},[50],"High throughput","c736ea280d4a0",{"_type":48,"marks":191,"text":192,"_key":193},[],": Our FIX servers interface directly with","c736ea280d4a1",{"_type":48,"marks":195,"text":196,"_key":197},[184]," Order Management Systems (OMSs)","c736ea280d4a2",{"_type":48,"marks":199,"text":200,"_key":201},[],", which manage the trades of thousands of clients. While we may only have a connection to a dozen different OMSs, they can each be submitting millions of trades a day.","c736ea280d4a3",{"markDefs":203,"children":204,"_type":53,"_key":213,"style":74},[],[205,209],{"_type":48,"marks":206,"text":207,"_key":208},[50],"High connection uptime","2b6b887755420",{"_type":48,"marks":210,"text":211,"_key":212},[],": Our users need to be able to maintain their connection for the entirety of the trading day. Downstream failures of the trade processing should not impact the connection.","2b6b887755421","2b6b88775542",{"markDefs":215,"children":216,"_type":53,"_key":225,"style":74},[],[217,221],{"_type":48,"marks":218,"text":219,"_key":220},[50],"Reliability","cdd91a37a2ea0",{"marks":222,"text":223,"_key":224,"_type":48},[],": Clients must receive all responses to their requests.","cdd91a37a2ea1","cdd91a37a2ea",{"markDefs":227,"children":228,"_type":53,"style":74,"_key":233},[],[229],{"_type":48,"marks":230,"text":231,"_key":232},[],"To ensure that these requirements were met, we came up with a design that includes three major components:","c3d32e4ca5680","c3d32e4ca568",{"children":235,"_type":53,"_key":244,"style":74,"markDefs":245},[236,240],{"_key":237,"_type":48,"marks":238,"text":239},"eca08e37fb680",[50],"Routing layer:",{"_type":48,"marks":241,"text":242,"_key":243},[]," This uses nginx to route each client based on their incoming IP.","eca08e37fb681","eca08e37fb68",[],{"children":247,"_type":53,"_key":265,"markDefs":266,"style":74},[248,252,256,261],{"_type":48,"marks":249,"text":250,"_key":251},[50],"Session management layer:","e8ae122123c10",{"_type":48,"marks":253,"text":254,"_key":255},[]," This uses","e8ae122123c11",{"_type":48,"marks":257,"text":259,"_key":260},[258],"ead1f9393e4f"," Kubernetes StatefulSets","e8ae122123c12",{"_type":48,"marks":262,"text":263,"_key":264},[]," so each pod has a unique identity that can ensure nginx routes each client to the same pod deterministically.","e8ae122123c13","e8ae122123c1",[267],{"_type":58,"to":268,"_key":258},"https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/",{"markDefs":270,"children":271,"style":74,"_type":53,"_key":280},[],[272,276],{"text":273,"_key":274,"_type":48,"marks":275},"Trade parsing layer:","f5d61c21ecda0",[50],{"marks":277,"text":278,"_key":279,"_type":48},[]," This is entirely separate from the session management layer and communicates back and forth via dynamically generated Kafka topics.","f5d61c21ecda1","f5d61c21ecda",{"markDefs":282,"children":283,"_type":53,"style":74,"_key":287},[],[284],{"_type":48,"marks":285,"text":28,"_key":286},[],"b1b929afaf440","b1b929afaf44",{"asset":289,"alt":291,"_key":292,"extension":32,"width":293,"children":14,"_type":294,"caption":295,"height":303,"hotspot":14,"url":304},{"_ref":290,"_type":34},"image-1b18770b0705d7a7397d399dfeebac2710dccd4d-1440x533-png","Overview of System","903966a1a636",1440,"figureNews",[296],{"markDefs":297,"children":298,"_type":53,"style":74,"_key":302},[],[299],{"_type":48,"marks":300,"text":291,"_key":301},[],"9ea71abbcd300","9ea71abbcd30",533,"https://cdn.sanity.io/images/40fnhjbe/production/1b18770b0705d7a7397d399dfeebac2710dccd4d-1440x533.png",{"_key":306,"markDefs":307,"children":308,"_type":53,"style":74},"aeec376553ee",[],[309],{"_type":48,"marks":310,"text":28,"_key":311},[],"aeec376553ee0",{"_key":313,"markDefs":314,"children":315,"_type":53,"style":54},"17e72a830bc1",[],[316],{"text":317,"_key":318,"_type":48,"marks":319},"Routing Layer","17e72a830bc10",[50],{"children":321,"_type":53,"style":74,"_key":326,"markDefs":327},[322],{"_type":48,"marks":323,"text":324,"_key":325},[],"Before clients can initiate a FIX session, their connection must be routed to a session manager. This layer uses information from the incoming connection to deterministically route each client to the same session manager on each connection.","52c839bb3d000","52c839bb3d00",[],{"style":74,"_key":329,"markDefs":330,"children":331,"_type":53},"ded9d06563e0",[],[332],{"_type":48,"marks":333,"text":28,"_key":334},[],"ded9d06563e00",{"style":74,"_key":336,"markDefs":337,"children":338,"_type":53},"b18e202cd1e7",[],[339],{"_type":48,"marks":340,"text":341,"_key":342},[],"An initial proposed solution excluded this nginx routing layer entirely. Clients could connect to any instance of the session manager, submit their trades, and receive responses from whatever instance they happened to connect with. A problem emerged when we considered the following situation: a client connects to session-manager-0, sends in a request, disconnects, and reconnects, but is routed to session-manager-1. That response is dropped completely. Although there are other ways of resolving this response issue, the deterministic routing offers two other key advantages.","b18e202cd1e70",{"_type":53,"style":74,"_key":344,"markDefs":345,"children":346},"4aaf1782e610",[],[347],{"_type":48,"marks":348,"text":28,"_key":349},[],"4aaf1782e6100",{"markDefs":351,"children":352,"_type":53,"style":74,"_key":357},[],[353],{"_key":354,"_type":48,"marks":355,"text":356},"04f379e1d2010",[],"First, this allows us to segment off each client from one another. That way a problem with handling one client’s inputs will not impact any other. If one session manager crashes, it impacts no one else and trades can continue flowing.","04f379e1d201",{"children":359,"_type":53,"style":74,"_key":363,"markDefs":364},[360],{"_type":48,"marks":361,"text":28,"_key":362},[],"12f8f210aee10","12f8f210aee1",[],{"_type":53,"style":74,"_key":366,"markDefs":367,"children":368},"e915a56cb877",[],[369],{"marks":370,"text":371,"_key":372,"_type":48},[],"Second, this allows us to cope with the volume in a more fine-grained way. The normal routing strategies, such as round robin, least conns, etc., can’t take into account the differences in load that our varied clients may present. Some OMSs may send in millions of trades per day while others send in only hundreds of thousands. We can keep the largest clients isolated by giving them one or two instances to themselves, while other clients could potentially be lumped together (though that loses the isolation benefits).","e915a56cb8770",{"markDefs":374,"children":375,"_type":53,"style":74,"_key":379},[],[376],{"_type":48,"marks":377,"text":28,"_key":378},[],"6676fdd847f00","6676fdd847f0",{"style":74,"_key":381,"markDefs":382,"children":386,"_type":53},"27629f48230f",[383],{"_type":58,"to":384,"_key":385},"http://nginx.org/en/docs/stream/ngx_stream_core_module.html","9bde6fab08a3",[387,391,395],{"_key":388,"_type":48,"marks":389,"text":390},"27629f48230f0",[],"nginx provides powerful tools for handling this sort of situation. The FIX protocol uses TCP, so nginx must be built with the",{"_type":48,"marks":392,"text":393,"_key":394},[385]," — with-stream module","27629f48230f1",{"_type":48,"marks":396,"text":397,"_key":398},[],". From there you can use out of the box nginx to accomplish the task. Specifically, the nginx ability to route based on incoming IPs is key here.","27629f48230f2",{"markDefs":400,"children":401,"_type":53,"style":74,"_key":405},[],[402],{"_key":403,"_type":48,"marks":404,"text":28},"e7d708d2d2290",[],"e7d708d2d229",{"_key":407,"markDefs":408,"children":409,"_type":53,"style":74},"8c5496e72791",[],[410],{"_type":48,"marks":411,"text":412,"_key":413},[],"Ordinarily in Kubernetes, pods have no unique identity. If there are two instances of the service session-manager, you can reach it via the IP session-manager.prod.svc.cluster.local, but you would not know which of the instances it would hit. By redefining the session-manager service to be deployed as a StatefulSet, each pod has its own unique identity and unique URL. The instance session-manager-1 can now be targeted specifically with the URL session-manager-1.prod.svc.cluster.local.","8c5496e727910",{"_key":415,"markDefs":416,"children":417,"_type":53,"style":74},"64637f509cfb",[],[418],{"_type":48,"marks":419,"text":28,"_key":420},[],"64637f509cfb0",{"_type":53,"style":74,"_key":422,"markDefs":423,"children":424},"ae530a29bdef",[],[425],{"text":426,"_key":427,"_type":48,"marks":428},"Let’s say we have two clients with IPs 10.0.0.0 and 10.0.0.1 and two instances of our session manager: session-manager-0 and session-manager-1. We can ensure IP 10.0.0.0 always connects to session-manager-0 and 10.0.0.1 always connects to session-manager-1 using the following nginx configuration:","ae530a29bdef0",[],{"_type":430,"_key":431,"code":432},"codeBlock","bc78065a7268",{"code":433,"_type":434},"stream {\nupstream session0 {\nserver session-manager-0.prod.svc.cluster.local\n｝\nupstream session1 {\nserver session-manager-1. prod.sc.cluster.local\n}\nmap $proxy_protocol_addr $backend_svr {\n123.14.15.16 session0\n341.41.51.61 session1\n}\nserver 1 {\nListen 8008 proxy_protocol;\nproxy_pass $backend_svr;\nproxy_protocol on;\n｝\n}","code",{"children":436,"_type":53,"style":74,"_key":441,"markDefs":442},[437],{"_type":48,"marks":438,"text":439,"_key":440},[],"(Note: proxy_protocol must be used because there is a load balancer in front of our nginx instances.)","2489a499808c0","2489a499808c",[],{"markDefs":444,"children":445,"_type":53,"style":74,"_key":449},[],[446],{"text":28,"_key":447,"_type":48,"marks":448},"0c601b862fa90",[],"0c601b862fa9",{"style":74,"_key":451,"markDefs":452,"children":453,"_type":53},"ce44013ce0bd",[],[454],{"_type":48,"marks":455,"text":456,"_key":457},[],"Thus, we have our consistent routing. This piece is very easily scalable as we can always just add in more instances of nginx if the load ever gets too much, and clients will be able to immediately connect to “their” server through it.","ce44013ce0bd0",{"children":459,"_type":53,"style":74,"_key":463,"markDefs":464},[460],{"marks":461,"text":28,"_key":462,"_type":48},[],"a67e9d02c1450","a67e9d02c145",[],{"width":293,"height":466,"_type":294,"alt":467,"asset":468,"children":14,"url":470,"caption":471,"_key":479,"extension":32,"hotspot":14},564,"nginx workflow",{"_ref":469,"_type":34},"image-69bebe8b8c91de95ce55d9505fc5695f3dd55da1-1440x564-png","https://cdn.sanity.io/images/40fnhjbe/production/69bebe8b8c91de95ce55d9505fc5695f3dd55da1-1440x564.png",[472],{"markDefs":473,"children":474,"_type":53,"style":74,"_key":478},[],[475],{"_type":48,"marks":476,"text":467,"_key":477},[],"1e788ab791160","1e788ab79116","e092706f95aa",{"_type":53,"style":54,"_key":481,"markDefs":482,"children":483},"bcf221717bfb",[],[484],{"_key":485,"_type":48,"marks":486,"text":487},"bcf221717bfb0",[50],"Session Management Layer",{"children":489,"_type":53,"style":74,"_key":494,"markDefs":495},[490],{"_type":48,"marks":491,"text":492,"_key":493},[],"In order to maximize session uptime, we decided to minimize downstream dependencies. We want to maintain a connection with our clients and continue heartbeating even if the rest of the system is down. To this end, it made sense to separate the session manager entirely from any part of parsing and submitting the trades.","649149429b120","649149429b12",[],{"markDefs":497,"children":498,"_type":53,"style":74,"_key":502},[],[499],{"_type":48,"marks":500,"text":28,"_key":501},[],"22fef07977c00","22fef07977c0",{"children":504,"_type":53,"style":74,"_key":509,"markDefs":510},[505],{"text":506,"_key":507,"_type":48,"marks":508},"The session manager has no responsibilities outside of receiving requests and sending them farther along into the system and returning responses (more on that later). The session manager simply takes the raw message and emits it as an event on Kafka with no parsing or verification done.","8227d6747b580",[],"8227d6747b58",[],{"children":512,"_type":53,"style":74,"_key":516,"markDefs":517},[513],{"_type":48,"marks":514,"text":28,"_key":515},[],"91057707f11f0","91057707f11f",[],{"children":519,"_type":53,"style":74,"_key":524,"markDefs":525},[520],{"marks":521,"text":522,"_key":523,"_type":48},[],"The unique identity provided by the StatefulSet also benefits the session management beyond just the routing. A FIX server has a configuration for what messages it is ready to accept based on the sender ID, their target ID, and the “session qualifier,” which is just an integer. To ensure that each session manager uses the proper config to match up with its given client, its unique pod identity signals which config it should be reading from. So, session-manager-0 would read from fix-0.cfg while session-manager-1 would read from fix-1.cfg.","059bfdf113f90","059bfdf113f9",[],{"style":74,"_key":527,"markDefs":528,"children":529,"_type":53},"b3c286ba641f",[],[530],{"text":28,"_key":531,"_type":48,"marks":532},"b3c286ba641f0",[],{"_key":534,"markDefs":535,"children":536,"_type":53,"style":74},"5095807730ee",[],[537],{"text":538,"_key":539,"_type":48,"marks":540},"This configuration is used both to establish the connection as well as to generate the Kafka topic that this session will emit events onto. Using the Sender ID and the Session Qualifier, a Kafka topic is generated of the form {SenderID}_{SessionQualifier}.input","5095807730ee0",[],{"_type":53,"style":74,"_key":542,"markDefs":543,"children":544},"6ffa6d2b6847",[],[545],{"_type":48,"marks":546,"text":28,"_key":547},[],"6ffa6d2b68470",{"caption":549,"_key":558,"asset":559,"_type":294,"alt":556,"extension":32,"children":14,"hotspot":14,"url":561,"width":293,"height":562},[550],{"style":74,"_key":551,"markDefs":552,"children":553,"_type":53},"aa29839d5e1b",[],[554],{"_type":48,"marks":555,"text":556,"_key":557},[],"Kafka Request and Response Routing","aa29839d5e1b0","b4700c5f8a28",{"_ref":560,"_type":34},"image-96da88e4c3e6f2fb93a8ae22a1f544eb660e02bc-1440x612-png","https://cdn.sanity.io/images/40fnhjbe/production/96da88e4c3e6f2fb93a8ae22a1f544eb660e02bc-1440x612.png",612,{"markDefs":564,"children":565,"_type":53,"style":74,"_key":569},[],[566],{"_type":48,"marks":567,"text":28,"_key":568},[],"3d8107d784b10","3d8107d784b1",{"children":571,"_type":53,"style":54,"_key":576,"markDefs":577},[572],{"text":573,"_key":574,"_type":48,"marks":575},"Trade Parsing Layer","7b5493e0cf900",[50],"7b5493e0cf90",[],{"markDefs":579,"children":580,"_type":53,"style":74,"_key":585},[],[581],{"_type":48,"marks":582,"text":583,"_key":584},[],"All that remains is to parse the trade and return it. The trade parsing engine reads in from all of the input topics, parses the trades into our internal format, submits them, and returns the response. In order to communicate the responses back to the session manager, the parser simply takes the topic the trade came from and modifies its name to be an output topic that the session manager knows to read from. For instance, if the input topic is client_0.input, the output topic would become client_1.output.","f68654b8e8ed0","f68654b8e8ed",{"style":74,"_key":587,"markDefs":588,"children":589,"_type":53},"9475a3bd5b87",[],[590],{"_key":591,"_type":48,"marks":592,"text":28},"9475a3bd5b870",[],{"children":594,"_type":53,"style":74,"_key":599,"markDefs":600},[595],{"_key":596,"_type":48,"marks":597,"text":598},"1d615d6e2b570",[],"This strategy guarantees that the client will receive their response at least once. The offset is not committed until the response has been sent out. Even if the program were to crash after sending but before committing the offset, the program would simply send the response twice, which is fine. At this point, the session manager simply needs to read off its own output topic, and convey those responses over the wire. This isolates the session from all other parts of the system.","1d615d6e2b57",[],{"_key":602,"markDefs":603,"children":604,"_type":53,"style":54},"a4780a8f5855",[],[605],{"_type":48,"marks":606,"text":607,"_key":608},[50],"Conclusion","a4780a8f58550",{"_key":610,"markDefs":611,"children":612,"_type":53,"style":74},"f174f66feb69",[],[613],{"_type":48,"marks":614,"text":615,"_key":616},[],"By utilizing a few different features in well understood technologies, we were able to adapt the FIX protocol for a more modern age. Each individual component is now scalable, allowing us far more flexibility than past systems have had, while maintaining the reliability that customers have come to expect when communicating over FIX.","f174f66feb690",{"markDefs":618,"children":619,"_type":53,"style":54,"_key":624},[],[620],{"text":621,"_key":622,"_type":48,"marks":623},"Future Work","821f60ae71d00",[50],"821f60ae71d0",{"_type":53,"style":74,"_key":626,"markDefs":627,"children":628},"139c33377cbc",[],[629],{"_type":48,"marks":630,"text":631,"_key":632},[],"There are still areas that need improvement in the current design.","139c33377cbc0",{"level":634,"_type":53,"style":74,"_key":635,"listItem":636,"markDefs":637,"children":641},1,"be8e34d4184a","bullet",[638],{"_type":58,"to":639,"_key":640},"https://microservices.io/patterns/data/transactional-outbox.html","2505e0685503",[642,646,650],{"_type":48,"marks":643,"text":644,"_key":645},[],"There is a potential for a fault in the system if the parser crashes in between sending the trade to the trade capture system and putting the response back onto the Kafka stream. An improvement here would be to have both the sending of the trade and the sending of the response utilize the","be8e34d4184a0",{"marks":647,"text":648,"_key":649,"_type":48},[640]," transaction outbox pattern","be8e34d4184a1",{"_type":48,"marks":651,"text":652,"_key":653},[],". This would ensure that either the entire operation succeeded or failed.","be8e34d4184a2",{"_key":655,"listItem":636,"markDefs":656,"children":657,"level":634,"_type":53,"style":74},"e31fb63a267d",[],[658],{"text":659,"_key":660,"_type":48,"marks":661},"The session-manager layer is not scalable. Currently there must be a single manager for each client. Since this acts merely as a pass-through, it should be ok, but it is still the one aspect of the system that cannot grow to account for increased usage.","e31fb63a267d0",[],[],[664,672],{"_key":665,"markDefs":666,"children":667,"_type":53,"style":74},"01d9743bd6e6",[],[668],{"marks":669,"text":670,"_key":671,"_type":48},[50],"About Clear Street:","820e76cb468a0",{"children":673,"_type":53,"style":74,"_key":686,"markDefs":687},[674,678,683],{"_type":48,"marks":675,"text":676,"_key":677},[],"Clear Street is modernizing the brokerage ecosystem with financial technology and services that empower market participants with real-time data and best-in-class products, tools and teams, to navigate capital markets around the world. Complemented by white-glove service, Clear Street's cloud-native, proprietary product suite delivers financing, derivatives, execution and more to power client success, adding efficiency to the market and enabling clients to minimize risk, redundancy and cost. Clear Street’s goal is to create a single platform for every asset class, in every country and in any currency. For more information, visit ","46cc6bc340df0",{"marks":679,"text":681,"_key":682,"_type":48},[680],"f69e401d33e9","https://clearstreet.io","46cc6bc340df1",{"_type":48,"marks":684,"text":111,"_key":685},[],"46cc6bc340df2","6558fb161935",[688],{"href":681,"_key":680,"_type":58},[690,720],{"markDefs":691,"children":698,"_type":53,"style":74,"_key":719},[692,695],{"_type":58,"href":693,"_key":694},"https://brokercheck.finra.org/firm/summary/288933","10659f16c05f",{"_type":58,"href":696,"_key":697},"https://www.nfa.futures.org/BasicNet/basic-profile.aspx?nfaid=XCoGScQYyvw%3D","3c111ef5e988",[699,703,707,711,715],{"_type":48,"marks":700,"text":701,"_key":702},[],"Clear Street does not provide investment, legal, regulatory, tax, or compliance advice. Consult professionals in these fields to address your specific circumstances. These materials are: (i) solely an overview of Clear Street’s products and services; (ii) provided for informational purposes only; and (iii) subject to change without notice or obligation to replace any information contained therein.\n\nProducts and services are offered by Clear Street LLC as a Broker Dealer member FINRA and SIPC and a Futures Commission Merchant registered with the CFTC and member of NFA. Additional information about Clear Street is available on FINRA ","e217f565c4110",{"_type":48,"marks":704,"text":705,"_key":706},[694],"BrokerCheck","e217f565c4111",{"_type":48,"marks":708,"text":709,"_key":710},[],", including its Customer Relationship Summary and NFA ","e217f565c4112",{"_type":48,"marks":712,"text":713,"_key":714},[697],"BASIC | NFA (futures.org)","e217f565c4113",{"_type":48,"marks":716,"text":717,"_key":718},[],".\n‍\nCopyright © 2024 Clear Street LLC. All rights reserved. Clear Street and the Shield Logo are Registered Trademarks of Clear Street LLC\n","e217f565c4114","cd3115128082",{"_type":53,"style":74,"_key":721,"markDefs":722,"children":723},"38805a72b34d",[],[724],{"_key":725,"_type":48,"marks":726,"text":727},"a19adde9170f0",[],"\n",{"title":729,"slug":730,"fields":731},"Contact","contact",[732,738,743,748,752],{"name":733,"label":734,"required":735,"errorMessage":736,"_type":737},"full-name","Full name",true,"Please add your full name","field.string",{"name":739,"label":740,"required":735,"errorMessage":741,"_type":742},"work-email","Work email","Invalid email","field.email",{"name":744,"label":745,"required":735,"errorMessage":746,"_type":747},"work-phone","Work phone","Please add your work phone","field.phone",{"name":749,"label":750,"required":735,"errorMessage":751,"_type":737},"company","Company","Please add your company",{"label":753,"required":754,"errorMessage":14,"_type":755,"name":756},"Message (optional)",false,"field.text","message",{"address":758,"disclaimer":759,"footerItems":786,"legalItems":818,"legalText":14,"socialNetworks":828},"4 World Trade Center\n150 Greenwich St Floor 45\nNew York, NY 10007\n(646) 845-0036",[760,770],{"_key":761,"markDefs":762,"children":765,"_type":53,"style":74},"b41b74ae73bb",[763],{"_type":58,"href":693,"_key":764},"d38625939708",[766],{"_key":767,"_type":48,"marks":768,"text":769},"331699fdb6140",[],"Products and services are offered by Clear Street LLC as a Broker Dealer member FINRA and SIPC and a Futures Commission Merchant registered with the CFTC and member of NFA. ",{"_type":53,"style":74,"_key":771,"markDefs":772,"children":774},"dbec5081eda7",[773],{"_type":58,"href":693,"_key":764},[775,779,782],{"_type":48,"marks":776,"text":777,"_key":778},[],"Additional information about Clear Street is available on FINRA ","42e587e4d749",{"_type":48,"marks":780,"text":705,"_key":781},[764],"4894062c01ca",{"marks":783,"text":784,"_key":785,"_type":48},[],", including its Customer Relationship Summary and NFA BASIC | NFA (futures.org).","6db9006e1b4a",[787,800,812],{"title":750,"pages":788},[789,793,796,799],{"type":790,"title":791,"slug":792},"internal","About","about",{"type":790,"title":794,"slug":795},"News & Content","news",{"type":790,"title":797,"slug":798},"Careers","careers",{"type":790,"title":729,"slug":730},{"title":801,"pages":802},"Services",[803,806,809],{"type":790,"title":804,"slug":805},"Institutional","institutional",{"type":790,"title":807,"slug":808},"Professional Clearing","professional-clearing",{"type":790,"title":810,"slug":811},"Active Trader","active-trader",{"title":813,"pages":814},"Products",[815],{"type":790,"title":816,"slug":817},"Studio","studio",[819,822,825],{"title":820,"slug":821},"Regulatory Disclosures","regulatory-disclosures",{"title":823,"slug":824},"Privacy Policy","privacy-policy",{"title":826,"slug":827},"Security","security",[829,834,838,842],{"_type":830,"link":831,"socialNetwork":832,"_key":833},"links","https://github.com/clear-street","github","466192507eea",{"_type":830,"link":835,"socialNetwork":836,"_key":837},"https://www.linkedin.com/company/clear-street","linkedin","43f9fa8f49d0",{"socialNetwork":839,"_key":840,"_type":830,"link":841},"youtube","b581a744d770","https://www.youtube.com/@ClearStreetNYC",{"link":843,"socialNetwork":844,"_key":845,"_type":830},"https://open.spotify.com/show/3Bbl6x17ZSdnijTTDq6tKi","spotify","7625c0ffc2b2",1733511758836]